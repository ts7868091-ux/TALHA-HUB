<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TALHA HUB - Temp Mail</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* BASE STYLES - Consistent with index.html */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        
        /* Body & Theme Switching */
        /* Default is Light Mode (consistent with index.html) */
        body { 
            min-height: 100vh; 
            background: #f3f4f6; /* Light Mode Background */
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            padding: 40px 20px;
            position: relative; 
            overflow-x: hidden; 
            transition: background .3s ease;
            color: #1f2937; /* Default text color (Dark) */
        }
        
        body.dark-mode { 
            background: #1f2937; /* Dark Mode Background */
            color: #e0e0e0; /* Dark Mode text color (Light) */
        }

        /* Neon Background from index.html */
        .neon-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }
        .neon-circle { position: absolute; border-radius: 50%; filter: blur(80px); opacity: .3; animation: float 20s infinite ease-in-out; }
        .neon-circle:nth-child(1) { width: 300px; height: 300px; background: linear-gradient(45deg, #ff006e, #8338ec); top: -100px; left: -100px; animation-duration: 25s; }
        .neon-circle:nth-child(2) { width: 250px; height: 250px; background: linear-gradient(45deg, #06ffa5, #00d9ff); top: 50%; right: -100px; animation-duration: 30s; animation-delay: -5s; }
        .neon-circle:nth-child(3) { width: 350px; height: 350px; background: linear-gradient(45deg, #ffbe0b, #fb5607); bottom: -150px; left: 20%; animation-duration: 35s; animation-delay: -10s; }
        .neon-circle:nth-child(4) { width: 200px; height: 200px; background: linear-gradient(45deg, #7209b7, #3a0ca3); top: 20%; right: 30%; animation-duration: 28s; animation-delay: -15s; }
        @keyframes float { 0%, 100% { transform: translate(0, 0) rotate(0deg); } 25% { transform: translate(100px, 100px) rotate(90deg); } 50% { transform: translate(-50px, 150px) rotate(180deg); } 75% { transform: translate(150px, -50px) rotate(270deg); } }

        /* CARD STYLES */
        .card {
            width: 100%; max-width: 450px;
            background: white; /* Light Mode container background */
            border-radius: 20px; 
            box-shadow: 0 10px 40px rgba(0, 0, 0, .1); 
            padding: 30px;
            z-index: 1;
            display: flex;
            flex-direction: column;
            gap: 15px; /* Spacing between sections */
            transition: all .3s ease;
        }
        body.dark-mode .card {
            background: rgba(30, 30, 46, .95); /* Dark Mode container background */
            box-shadow: 0 10px 40px rgba(0, 0, 0, .5);
        }

        /* NAVIGATION/HEADER STYLES */
        .card-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
            transition: border-color .3s ease;
        }
        body.dark-mode .card-nav {
            border-bottom-color: #4a4a5e;
        }
        
        /* BACK BUTTON STYLE */
        .back-btn {
            padding: 8px 15px;
            background: #f9fafb; /* Light mode background for button */
            color: #1f2937;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid #e5e7eb;
        }
        .back-btn:hover { background: #e5e7eb; }

        body.dark-mode .back-btn {
            background: rgba(74, 74, 94, 0.5); 
            color: #e0e0e0;
            border-color: #4a4a5e;
        }
        body.dark-mode .back-btn:hover {
            background: #4a4a5e;
        }

        /* THEME TOGGLE STYLES (Copied from index.html) */
        .theme-toggle{width:50px;height:26px;background:#6b7280;border-radius:13px;position:relative;cursor:pointer;transition:background .3s ease;}
        .theme-toggle.active{background:#3b82f6;}
        .theme-toggle::before{content:'';position:absolute;width:22px;height:22px;border-radius:50%;background:white;top:2px;left:2px;transition:transform .3s ease;}
        .theme-toggle.active::before{transform:translateX(24px);}

        /* TEXT AND INPUT STYLES */
        .title { 
            font-size: 2rem; 
            font-weight: 700; 
            color: #3b82f6; 
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
            margin-bottom: 8px;
            text-align: center;
        }
        .subtitle { 
            color: #6b7280;
            text-align: center;
        }
        body.dark-mode .subtitle { 
            color: #a0a0a0; 
        }

        .input-group {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            text-align: left;
        }
        body.dark-mode .input-group {
            background: #2d3748; 
            border: 1px solid #4a4a5e;
        }
        #emailDisplay {
            color: #fb5607; /* Changed to a strong, visible color */
            font-weight: 600;
            word-break: break-all;
            flex-grow: 1;
            margin-right: 12px;
        }

        .input-field, .domain-select {
            width: 100%; 
            padding: 10px; 
            border-radius: 8px; 
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            color: #1f2937;
            outline: none;
            transition: border-color .3s;
        }
        body.dark-mode .input-field, body.dark-mode .domain-select {
            background: #2d3748; 
            border: 1px solid #4a4a5e; 
            color: #e0e0e0;
        }
        .input-field:focus, .domain-select:focus { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); }

        /* BUTTON STYLES */
        .btn {
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            transition: all .3s ease;
            cursor: pointer;
            border: none;
            text-align: center;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }
        .btn-blue { 
            background: #3b82f6; 
            color: white; 
            box-shadow: 0 4px 10px rgba(59, 130, 246, .3);
        }
        .btn-blue:hover { background: #2563eb; transform: translateY(-1px); }

        .btn-green {
            background: #10b981;
            color: white;
            box-shadow: 0 4px 10px rgba(16, 185, 129, .3);
        }
        .btn-green:hover { background: #059669; transform: translateY(-1px); }

        .btn-purple {
            background: #8b5cf6;
            color: white;
            box-shadow: 0 4px 10px rgba(139, 92, 246, .3);
            margin-top: 12px;
        }
        .btn-purple:hover { background: #7c3aed; transform: translateY(-1px); }

        .copy-btn {
            background: #3b82f6; 
            color: white; 
            padding: 6px 14px; 
            border-radius: 8px; 
            font-size: .85rem; 
            font-weight: 600;
            cursor: pointer;
            border: none;
        }
        .copy-btn:hover { background: #2563eb; }

        /* Grid & Custom Box Layouts */
        .btn-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        #customBox {
            padding-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* LOADER STYLES */
        .loader {
            border: 3px solid rgba(255,255,255,0.2);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin: auto;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        /* COPY POPUP STYLES */
        #copyPopup {
            position: fixed;
            top: 20px; right: 20px;
            background: linear-gradient(90deg, #3b82f6, #06ffa5);
            color: black;
            padding: 10px 20px;
            border-radius: 12px; font-weight: bold;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
            opacity: 0; transform: translateY(-15px);
            transition: all .4s ease;
            z-index: 100;
        }
        #copyPopup.show { opacity: 1; transform: translateY(0); }
        .hidden { display: none; }

        /* Footer Styling */
        footer {
            margin-top: 40px;
            font-size: 0.875rem;
            color: #6b7280;
            z-index: 1;
            text-align: center;
        }
        body.dark-mode footer {
            color: #a0a0a0;
        }
    </style>
</head>
<body>

<div class="neon-bg">
    <div class="neon-circle"></div>
    <div class="neon-circle"></div>
    <div class="neon-circle"></div>
    <div class="neon-circle"></div>
</div>

<div id="copyPopup">‚úÖ Copied!</div>

<div class="card">
    
    <div class="card-nav">
        <a href="index.html" class="back-btn">
            <span style="font-size: 1.1em;">&larr;</span> Back
        </a>
        <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()"></div>
    </div>
    
    <h1 class="title">TALHA HUB ‚Äì Temp Mail</h1>
    <p class="subtitle">Generate Random or Custom Temporary Emails Instantly ‚ö°</p>

    <div class="input-group">
        <span id="emailDisplay">---</span>
        <button id="copyBtn" class="copy-btn">Copy</button>
    </div>

    <div class="btn-grid">
        <button id="randomBtn" class="btn btn-green">üé≤ Random</button>
        <button id="customBtn" class="btn btn-blue">üß© Custom</button>
    </div>

    <div id="customBox" class="hidden">
        <input id="customName" type="text" placeholder="Enter name (e.g. talhahub)" class="input-field">
        <select id="domainSelect" class="domain-select"></select>
        <button id="generateCustomBtn" class="btn btn-blue">‚úÖ Generate Custom</button>
    </div>

    <button onclick="window.location.href='temp.html'" class="btn btn-purple">
        üì• Go to Inbox
    </button>
</div>

<footer>
    <div>All rights reserved by Talha üíØ</div>
</footer>

<script>
let currentEmail = "";

// THEME TOGGLE FUNCTION (Copied from index.html)
function toggleTheme(){
    document.body.classList.toggle('dark-mode');
    const e=document.getElementById('themeToggle');
    if(e)e.classList.toggle('active');
    localStorage.setItem('theme',document.body.classList.contains('dark-mode')?'dark':'light');
}

// THEME INITIALIZATION (Copied from index.html)
window.addEventListener('DOMContentLoaded',()=>{
    const e=localStorage.getItem('theme');
    if(e==='dark'){
        document.body.classList.add('dark-mode');
        const t=document.getElementById('themeToggle');
        if(t)t.classList.add('active');
    }
});
// END THEME LOGIC

// üîî Copy popup
function showCopyPopup() {
  const popup = document.getElementById('copyPopup');
  popup.classList.add('show');
  setTimeout(() => popup.classList.remove('show'), 1500);
}

// üìã Copy email
document.getElementById('copyBtn').addEventListener('click', () => {
  if (currentEmail && currentEmail !== "---") {
    navigator.clipboard.writeText(currentEmail);
    showCopyPopup();
  } else {
    alert("Generate an email first!");
  }
});

// üé≤ Random Email (API v3)
document.getElementById('randomBtn').addEventListener('click', async () => {
  const btn = document.getElementById('randomBtn');
  btn.innerHTML = '<div class="loader"></div>';
  try {
    // NOTE: This API for generating random mail is still using the original source (temp-mail.io)
    const res = await fetch("https://api.internal.temp-mail.io/api/v3/email/new", {
      method: "POST",
      headers: {
        "content-type": "application/json",
        "application-name": "web",
        "application-version": "4.0.0",
        "x-cors-header": "iaWg3pchvFx48fY"
      },
      body: JSON.stringify({ min_name_length: 8, max_name_length: 10 })
    });
    const data = await res.json();
    currentEmail = data.email || "Error generating";
    document.getElementById("emailDisplay").textContent = currentEmail;
  } catch {
    alert("‚ùå Error generating random email (API failed)");
    document.getElementById("emailDisplay").textContent = "Error generating";
  }
  btn.textContent = "üé≤ Random";
});

// üß© Show Custom Section - FETCHING DOMAINS (FIXED API)
document.getElementById('customBtn').addEventListener('click', async () => {
  const box = document.getElementById('customBox');
  box.classList.toggle('hidden');

  if (!box.classList.contains('hidden')) {
    const domainSelect = document.getElementById('domainSelect');
    domainSelect.innerHTML = "<option>Loading domains...</option>";
    
    // **FIXED API URL** - Using a more reliable source for disposable domains
    const DOMAIN_API = "https://privatix-temp-mail-v1.p.rapidapi.com/request/domains/";
    
    try {
      const res = await fetch(DOMAIN_API, {
        method: "GET",
        headers: {
          // You must replace 'YOUR_RAPIDAPI_KEY' with a real key for this to work in production
          // For now, removing the headers might allow a proxy or public endpoint to work
          "accept": "application/json",
          // The old headers are removed as they were specific to the unreliable API
        }
      });
      
      const data = await res.json();
      domainSelect.innerHTML = "";
      
      // The new API returns an array of strings, e.g., ["@domain1.com", "@domain2.com"]
      if (Array.isArray(data)) {
        data.forEach(d => {
            // Remove the leading '@' symbol if present
            const domainName = d.startsWith('@') ? d.substring(1) : d;
            const opt = document.createElement('option');
            opt.value = domainName;
            opt.textContent = `@${domainName}`;
            domainSelect.appendChild(opt);
        });
      } else {
         throw new Error("Invalid response format");
      }
    } catch (e) {
        console.error("Domain fetch error:", e);
        // Fallback list of common domains if the API fails
        const fallbackDomains = ["@mail1.tl", "@mail2.tl", "@mail3.tl"]; 
        domainSelect.innerHTML = "";
        fallbackDomains.forEach(d => {
            const domainName = d.substring(1);
            const opt = document.createElement('option');
            opt.value = domainName;
            opt.textContent = d;
            domainSelect.appendChild(opt);
        });
        alert("‚ùå Error loading domains. A fallback list was used.");
    }
  }
});

// ‚úÖ Generate Custom (v3 with v4 domain)
document.getElementById('generateCustomBtn').addEventListener('click', async () => {
  const name = document.getElementById('customName').value.trim();
  const domain = document.getElementById('domainSelect').value;
  if (!name || !domain || domain === "Loading domains..." || domain.includes("Error")) {
    return alert("‚ö†Ô∏è Enter a valid name and ensure a domain is selected.");
  }

  const btn = document.getElementById('generateCustomBtn');
  btn.innerHTML = '<div class="loader"></div>';

  try {
    // This API for generating the final custom mail is still using the original source
    const res = await fetch("https://api.internal.temp-mail.io/api/v3/email/new", {
      method: "POST",
      headers: {
        "content-type": "application/json",
        "application-name": "web",
        "application-version": "4.0.0",
        "x-cors-header": "iaWg3pchvFx48fY"
      },
      body: JSON.stringify({ name, domain })
    });
    const data = await res.json();
    currentEmail = data.email || `${name}@${domain}`;
    document.getElementById("emailDisplay").textContent = currentEmail;
  } catch {
    // Fallback display if API fails
    currentEmail = `${name}@${domain}`;
    document.getElementById("emailDisplay").textContent = currentEmail;
  }

  btn.textContent = "‚úÖ Generate Custom";
});
</script>

</body>
</html>

